import{d as K,C as j,r as p,o as U,c as r,b as s,t as e,D as g,e as q,w as a,s as x,j as n,F as H,f as W,A as z,E as J,g as Q,h as i,i as X}from"./index-c65d1cd2.js";const Y={class:"admin-dashboard"},Z={class:"container mx-auto px-4 py-8"},$={class:"flex justify-between items-center mb-8"},ss={class:"text-gray-600"},ts={class:"flex space-x-4"},es={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},ds={class:"card"},os={class:"card-body"},is={class:"flex items-center"},ls={class:"text-2xl font-bold"},rs={class:"text-xs text-gray-500"},as={class:"text-xs text-gray-500"},ns={class:"card"},cs={class:"card-body"},us={class:"flex items-center"},ms={class:"text-2xl font-bold"},xs={class:"text-xs text-gray-500"},vs={class:"card"},_s={class:"card-body"},ps={class:"flex items-center"},gs={class:"text-2xl font-bold"},bs={class:"text-xs text-gray-500"},ys={class:"text-xs text-gray-500"},fs={class:"card"},hs={class:"card-body"},Es={class:"flex items-center"},As={class:"text-2xl font-bold"},Rs={key:1,class:"text-center text-gray-500"},Os={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},ws={class:"card"},Ds={class:"card-body"},ks={class:"grid grid-cols-2 gap-4"},Ns={class:"card"},Ls={class:"card-body"},Cs={class:"space-y-4"},Gs={class:"flex-1"},Ms={class:"text-sm"},Ss={class:"text-xs text-gray-500"},Ts={key:2,class:"card"},Bs=K({__name:"AdminDashboard",setup(Ps){const v=j(),d=p(null),b=p(!0),B=p([{id:1,description:"Nouveau produit ajouté: iPhone 15 Pro",createdAt:new Date},{id:2,description:"Commande #1234 traitée",createdAt:new Date(Date.now()-36e5)},{id:3,description:"Nouvel utilisateur inscrit",createdAt:new Date(Date.now()-72e5)}]),c=o=>{var u,m;const t=(u=v.user)==null?void 0:u.role;return((m={"products:read":["ROLE_ADMIN","ROLE_STORE_KEEPER","ROLE_USER"],"products:write":["ROLE_ADMIN","ROLE_STORE_KEEPER"],"users:write":["ROLE_ADMIN"],"orders:read":["ROLE_ADMIN","ROLE_COMPTA","ROLE_STORE_KEEPER"],"analytics:read":["ROLE_ADMIN","ROLE_COMPTA"]}[o])==null?void 0:m.includes(t||""))||!1},F=o=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(o),V=o=>new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(o),y=async()=>{b.value=!0;try{const o=await J.get("/admin/dashboard");console.log("DASHBOARD DATA",o.data),o.data.success&&(d.value=o.data.data)}catch{d.value=null}finally{b.value=!1}};return U(y),(o,t)=>{var u,m,f,h,E,A,R,O,w,D,k,N,L,C,G,M,S,T,P,I;const l=Q("router-link");return i(),r("div",Y,[s("div",Z,[s("div",$,[s("div",null,[t[0]||(t[0]=s("h1",{class:"text-3xl font-bold text-gray-900"},"Dashboard Admin",-1)),s("p",ss,"Bienvenue "+e((u=g(v).user)==null?void 0:u.firstName)+" ("+e((m=g(v).user)==null?void 0:m.role)+")",1)]),s("div",ts,[s("button",{onClick:y,class:"btn btn-outline"}," 🔄 Actualiser "),q(l,{to:"/admin/users",class:"btn btn-primary"},{default:a(()=>t[1]||(t[1]=[X(" 👥 Gérer les utilisateurs ")])),_:1,__:[1]})])]),d.value?(i(),r("div",es,[s("div",ds,[s("div",os,[s("div",is,[t[3]||(t[3]=s("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600 mr-4"}," 👥 ",-1)),s("div",null,[t[2]||(t[2]=s("p",{class:"text-sm text-gray-600"},"Utilisateurs",-1)),s("p",ls,e(((h=(f=d.value)==null?void 0:f.users)==null?void 0:h.total)??0),1),s("p",rs,"Actifs : "+e(((A=(E=d.value)==null?void 0:E.users)==null?void 0:A.active)??0),1),s("p",as,"Nouveaux cette semaine : "+e(((O=(R=d.value)==null?void 0:R.users)==null?void 0:O.newThisWeek)??0),1)])])])]),s("div",ns,[s("div",cs,[s("div",us,[t[5]||(t[5]=s("div",{class:"p-3 rounded-full bg-green-100 text-green-600 mr-4"}," 📦 ",-1)),s("div",null,[t[4]||(t[4]=s("p",{class:"text-sm text-gray-600"},"Produits",-1)),s("p",ms,e(((D=(w=d.value)==null?void 0:w.products)==null?void 0:D.total)??0),1),s("p",xs,"Stock faible : "+e(((N=(k=d.value)==null?void 0:k.products)==null?void 0:N.lowStock)??0),1)])])])]),s("div",vs,[s("div",_s,[s("div",ps,[t[7]||(t[7]=s("div",{class:"p-3 rounded-full bg-yellow-100 text-yellow-600 mr-4"}," 🛒 ",-1)),s("div",null,[t[6]||(t[6]=s("p",{class:"text-sm text-gray-600"},"Commandes",-1)),s("p",gs,e(((C=(L=d.value)==null?void 0:L.orders)==null?void 0:C.total)??0),1),s("p",bs,"En attente : "+e(((M=(G=d.value)==null?void 0:G.orders)==null?void 0:M.pending)??0),1),s("p",ys,"Ce mois : "+e(((T=(S=d.value)==null?void 0:S.orders)==null?void 0:T.thisMonth)??0),1)])])])]),s("div",fs,[s("div",hs,[s("div",Es,[t[9]||(t[9]=s("div",{class:"p-3 rounded-full bg-purple-100 text-purple-600 mr-4"}," 💰 ",-1)),s("div",null,[t[8]||(t[8]=s("p",{class:"text-sm text-gray-600"},"CA du mois",-1)),s("p",As,e(F(((P=d.value)==null?void 0:P.revenue)??0)),1)])])])])])):(i(),r("div",Rs,t[10]||(t[10]=[s("p",null,"Chargement des statistiques...",-1)]))),s("div",Os,[s("div",ws,[t[16]||(t[16]=s("div",{class:"card-header"},[s("h2",{class:"text-xl font-semibold"},"Actions rapides")],-1)),s("div",Ds,[s("div",ks,[c("products:write")?(i(),x(l,{key:0,to:"/admin/products/new",class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-center"},{default:a(()=>t[11]||(t[11]=[s("div",{class:"text-2xl mb-2"},"➕",-1),s("div",{class:"text-sm font-medium"},"Nouveau produit",-1)])),_:1,__:[11]})):n("",!0),c("users:write")?(i(),x(l,{key:1,to:"/admin/users/new",class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-center"},{default:a(()=>t[12]||(t[12]=[s("div",{class:"text-2xl mb-2"},"👤",-1),s("div",{class:"text-sm font-medium"},"Nouvel utilisateur",-1)])),_:1,__:[12]})):n("",!0),c("orders:read")?(i(),x(l,{key:2,to:"/admin/orders",class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-center"},{default:a(()=>t[13]||(t[13]=[s("div",{class:"text-2xl mb-2"},"📋",-1),s("div",{class:"text-sm font-medium"},"Voir commandes",-1)])),_:1,__:[13]})):n("",!0),c("analytics:read")?(i(),x(l,{key:3,to:"/admin/analytics",class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-center"},{default:a(()=>t[14]||(t[14]=[s("div",{class:"text-2xl mb-2"},"📊",-1),s("div",{class:"text-sm font-medium"},"Analytics",-1)])),_:1,__:[14]})):n("",!0),c("analytics:read")?(i(),x(l,{key:4,to:"/admin/users",class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-center"},{default:a(()=>t[15]||(t[15]=[s("div",{class:"text-2xl mb-2"},"📖",-1),s("div",{class:"text-sm font-medium"},"liste des utilisateurs",-1)])),_:1,__:[15]})):n("",!0)])])]),s("div",Ns,[t[18]||(t[18]=s("div",{class:"card-header"},[s("h2",{class:"text-xl font-semibold"},"Activité récente")],-1)),s("div",Ls,[s("div",Cs,[(i(!0),r(H,null,W(B.value,_=>(i(),r("div",{key:_.id,class:"flex items-center"},[t[17]||(t[17]=s("div",{class:"w-2 h-2 bg-blue-500 rounded-full mr-3"},null,-1)),s("div",Gs,[s("p",Ms,e(_.description),1),s("p",Ss,e(V(_.createdAt)),1)])]))),128))])])])]),((I=g(v).user)==null?void 0:I.role)==="ROLE_ADMIN"?(i(),r("div",Ts,t[19]||(t[19]=[z('<div class="card-header"><h2 class="text-xl font-semibold">Gestion des permissions</h2></div><div class="card-body"><div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div><h3 class="font-semibold text-green-600 mb-2">ROLE_ADMIN</h3><ul class="text-sm space-y-1"><li>✅ Gestion complète des utilisateurs</li><li>✅ Gestion complète des produits</li><li>✅ Gestion des commandes</li><li>✅ Gestion des factures</li><li>✅ Analytics complètes</li></ul></div><div><h3 class="font-semibold text-blue-600 mb-2">ROLE_STORE_KEEPER</h3><ul class="text-sm space-y-1"><li>❌ Gestion des utilisateurs</li><li>✅ Gestion des produits</li><li>✅ Gestion des stocks</li><li>✅ Lecture des commandes</li><li>❌ Gestion des factures</li></ul></div><div><h3 class="font-semibold text-purple-600 mb-2">ROLE_COMPTA</h3><ul class="text-sm space-y-1"><li>❌ Gestion des utilisateurs</li><li>❌ Gestion des produits</li><li>✅ Lecture des commandes</li><li>✅ Gestion des factures</li><li>✅ Analytics financières</li></ul></div></div></div>',2)]))):n("",!0)])])}}});export{Bs as default};
//# sourceMappingURL=AdminDashboard-541250b5.js.map
