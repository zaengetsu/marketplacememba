{"version":3,"file":"ResetPassword-5e2cc1c6.js","sources":["../../src/views/ResetPassword.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mx-auto py-16 text-center\">\r\n    <form v-if=\"!success\" @submit.prevent=\"handleReset\" class=\"max-w-sm mx-auto bg-white p-6 rounded shadow\">\r\n      <h2 class=\"text-xl font-bold mb-4\">Réinitialiser mon mot de passe</h2>\r\n      <input\r\n        v-model=\"password\"\r\n        type=\"password\"\r\n        placeholder=\"Nouveau mot de passe\"\r\n        class=\"border rounded px-3 py-2 w-full mb-4\"\r\n        required\r\n      />\r\n      <button type=\"submit\" class=\"btn btn-primary w-full\">Réinitialiser</button>\r\n      <div v-if=\"error\" class=\"text-red-600 mt-2\">{{ error }}</div>\r\n    </form>\r\n    <div v-else class=\"text-green-600 text-xl font-bold\">\r\n      ✅ Mot de passe modifié avec succès !<br>\r\n      <span>Redirection vers l'accueil...</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst password = ref('')\r\nconst error = ref('')\r\nconst success = ref(false)\r\n\r\nconst token = route.params.token as string\r\n\r\nconst handleReset = async () => {\r\n  error.value = ''\r\n  try {\r\n    const res = await fetch(`/api/auth/reset-password/${token}`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ password: password.value })\r\n    })\r\n    const data = await res.json()\r\n    if (data.success) {\r\n      success.value = true\r\n      setTimeout(() => {\r\n        router.push('/')\r\n      }, 2000) // Redirige après 2 secondes\r\n    } else {\r\n      error.value = data.error || 'Erreur lors de la réinitialisation.'\r\n    }\r\n  } catch {\r\n    error.value = 'Erreur serveur.'\r\n  }\r\n}\r\n</script>"],"names":["route","useRoute","router","useRouter","password","ref","error","success","token","handleReset","data","_openBlock","_createElementBlock","_hoisted_1","_hoisted_3","_cache","_createElementVNode","$event","_hoisted_2","_toDisplayString"],"mappings":"8SAyBA,MAAMA,EAAQC,IACRC,EAASC,IACTC,EAAWC,EAAI,EAAE,EACjBC,EAAQD,EAAI,EAAE,EACdE,EAAUF,EAAI,EAAK,EAEnBG,EAAQR,EAAM,OAAO,MAErBS,EAAc,SAAY,CAC9BH,EAAM,MAAQ,GACV,GAAA,CAMI,MAAAI,EAAO,MALD,MAAM,MAAM,4BAA4BF,CAAK,GAAI,CAC3D,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,UAAU,CAAE,SAAUJ,EAAS,MAAO,CAAA,CAClD,GACsB,OACnBM,EAAK,SACPH,EAAQ,MAAQ,GAChB,WAAW,IAAM,CACfL,EAAO,KAAK,GAAG,GACd,GAAI,GAEDI,EAAA,MAAQI,EAAK,OAAS,qCAC9B,MACM,CACNJ,EAAM,MAAQ,iBAChB,CAAA,gBAnDAK,EAAA,EAAAC,EAiBM,MAjBNC,EAiBM,CAhBSN,EAAO,OAYpBI,EAAA,EAAAC,EAGM,MAHNE,EAGMC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAH+C,uCACf,EAAAC,EAAI,KAAA,KAAA,KAAA,EAAA,EACxCA,EAA0C,YAApC,gCAA6B,EAAA,WAdrCJ,EAWO,OAAA,OAXgB,WAAgBH,EAAW,CAAA,SAAA,CAAA,EAAE,MAAM,8CAAA,GACxDM,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAAsE,KAAlE,CAAA,MAAM,0BAAyB,iCAA8B,EAAA,KACjEA,EAME,QAAA,sCALSZ,EAAQ,MAAAa,GACjB,KAAK,WACL,YAAY,uBACZ,MAAM,uCACN,SAAA,EAAA,gBAJSb,EAAQ,KAAA,CAAA,eAMnBY,EAA2E,SAAA,CAAnE,KAAK,SAAS,MAAM,wBAAA,EAAyB,gBAAa,EAAA,GACvDV,EAAK,WAAhBM,EAA6D,MAA7DM,EAA6DC,EAAdb,EAAK,KAAA,EAAA,CAAA"}