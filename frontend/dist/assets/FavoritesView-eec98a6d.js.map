{"version":3,"file":"FavoritesView-eec98a6d.js","sources":["../../src/views/FavoritesView.vue"],"sourcesContent":["<template>\n  <div class=\"favorites-view min-h-screen bg-gray-50\">\n    <div class=\"container mx-auto px-4 py-8\">\n      <!-- Header -->\n      <div class=\"mb-8\">\n        <h1 class=\"text-3xl font-bold text-gray-900 mb-2\">Mes Favoris</h1>\n        <p class=\"text-gray-600\">Retrouvez tous vos produits pr√©f√©r√©s</p>\n      </div>\n\n      <!-- Empty State -->\n      <div v-if=\"favorites.length === 0\" class=\"text-center py-16\">\n        <div class=\"w-24 h-24 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center\">\n          <span class=\"text-4xl\">üíù</span>\n        </div>\n        <h3 class=\"text-xl font-semibold text-gray-900 mb-2\">Aucun favori pour le moment</h3>\n        <p class=\"text-gray-600 mb-6\">D√©couvrez nos produits et ajoutez vos pr√©f√©r√©s √† cette liste</p>\n        <router-link\n          to=\"/products\"\n          class=\"inline-flex items-center px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:from-orange-600 hover:to-red-700 transition-all\"\n        >\n          D√©couvrir nos produits\n        </router-link>\n      </div>\n\n      <!-- Favorites Grid -->\n      <div v-else>\n        <!-- Actions Bar -->\n        <div class=\"flex justify-between items-center mb-6\">\n          <p class=\"text-gray-600\">{{ favorites.length }} produit(s) en favoris</p>\n          <button\n            @click=\"clearAllFavorites\"\n            class=\"text-red-600 hover:text-red-700 font-medium\"\n            :disabled=\"isLoading\"\n          >\n            Vider les favoris\n          </button>\n        </div>\n\n        <!-- Products Grid -->\n        <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n          <div\n            v-for=\"product in favorites\"\n            :key=\"product.id\"\n            class=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow group\"\n          >\n            <!-- Product Image -->\n            <div class=\"relative aspect-square overflow-hidden\">\n              <img\n                :src=\"getProductImage(product)\"\n                :alt=\"product.name\"\n                class=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n              />\n              \n              <!-- Favorite Button -->\n              <button\n                @click=\"removeFromFavorites(product.id)\"\n                class=\"absolute top-3 right-3 w-10 h-10 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center text-red-500 hover:bg-white hover:text-red-600 transition-all shadow-sm\"\n                :disabled=\"isLoading\"\n              >\n                <span class=\"text-xl\">‚ù§Ô∏è</span>\n              </button>\n\n              <!-- Sale Badge -->\n              <div\n                v-if=\"product.isOnSale && product.salePrice\"\n                class=\"absolute top-3 left-3 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-medium\"\n              >\n                -{{ Math.round(((product.price - product.salePrice) / product.price) * 100) }}%\n              </div>\n\n              <!-- Stock Badge -->\n              <div\n                v-if=\"product.stockQuantity <= 5 && product.stockQuantity > 0\"\n                class=\"absolute bottom-3 left-3 bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-medium\"\n              >\n                Plus que {{ product.stockQuantity }} en stock\n              </div>\n              <div\n                v-else-if=\"product.stockQuantity === 0\"\n                class=\"absolute bottom-3 left-3 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-medium\"\n              >\n                Rupture de stock\n              </div>\n            </div>\n\n            <!-- Product Info -->\n            <div class=\"p-4\">\n              <div class=\"mb-2\">\n                <span class=\"text-xs text-gray-500 uppercase tracking-wide\">{{ product.category?.name || 'Sport' }}</span>\n              </div>\n              \n              <h3 class=\"font-semibold text-gray-900 mb-2 line-clamp-2\">{{ product.name }}</h3>\n              \n              <p class=\"text-sm text-gray-600 mb-3 line-clamp-2\">{{ product.description }}</p>\n\n              <!-- Price -->\n              <div class=\"flex items-center justify-between mb-4\">\n                <div class=\"flex items-center space-x-2\">\n                  <span\n                    v-if=\"product.isOnSale && product.salePrice\"\n                    class=\"text-lg font-bold text-red-600\"\n                  >\n                    {{ formatCurrency(product.salePrice) }}\n                  </span>\n                  <span\n                    :class=\"[\n                      'font-semibold',\n                      product.isOnSale && product.salePrice\n                        ? 'text-sm text-gray-500 line-through' \n                        : 'text-lg text-gray-900'\n                    ]\"\n                  >\n                    {{ formatCurrency(product.price) }}\n                  </span>\n                </div>\n              </div>\n\n              <!-- Actions -->\n              <div class=\"flex space-x-2\">\n                <button\n                  @click=\"addToCart(product)\"\n                  :disabled=\"product.stockQuantity === 0 || isLoading\"\n                  class=\"flex-1 px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:from-orange-600 hover:to-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium\"\n                >\n                  {{ product.stockQuantity === 0 ? 'Rupture de stock' : 'Ajouter au panier' }}\n                </button>\n                \n                <router-link\n                  :to=\"`/products/${product.id}`\"\n                  class=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium\"\n                >\n                  Voir\n                </router-link>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Load More Button -->\n        <div v-if=\"hasMore\" class=\"text-center mt-8\">\n          <button\n            @click=\"loadMore\"\n            :disabled=\"isLoading\"\n            class=\"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50\"\n          >\n            {{ isLoading ? 'Chargement...' : 'Charger plus' }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\nimport { useCartStore } from '@/stores/cart'\nimport { useToast } from 'vue-toastification'\nimport { productService } from '@/services/api'\nimport type { Product } from '@/types/product'\n\nconst cartStore = useCartStore()\nconst toast = useToast()\n\nconst favorites = ref<Product[]>([])\nconst isLoading = ref(false)\nconst hasMore = ref(false)\n\n// Images par d√©faut pour les cat√©gories\nconst categoryImages: Record<string, string> = {\n  'chaussures': 'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=500&h=500&fit=crop',\n  'musculation': 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=500&h=500&fit=crop',\n  'yoga-pilates': 'https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=500&h=500&fit=crop',\n  'electronique-sport': 'https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&h=500&fit=crop',\n  'accessoires': 'https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=500&h=500&fit=crop',\n  'nutrition': 'https://images.unsplash.com/photo-1593095948071-474c5cc2989d?w=500&h=500&fit=crop',\n  'cardio': 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=500&h=500&fit=crop',\n  'sports-combat': 'https://images.unsplash.com/photo-1549719386-74dfcbf7dbed?w=500&h=500&fit=crop'\n}\n\nconst loadFavorites = async () => {\n  isLoading.value = true\n  try {\n    // R√©cup√©rer les IDs des favoris depuis localStorage\n    const savedFavorites = localStorage.getItem('userFavorites')\n    if (!savedFavorites) {\n      favorites.value = []\n      return\n    }\n\n    const favoriteIds = JSON.parse(savedFavorites)\n    if (!Array.isArray(favoriteIds) || favoriteIds.length === 0) {\n      favorites.value = []\n      return\n    }\n\n    // Charger les produits favoris depuis l'API\n    const favoriteProducts: Product[] = []\n    for (const id of favoriteIds) {\n      try {\n        const response = await productService.getProduct(id.toString())\n        if (response.success && response.data) {\n          favoriteProducts.push(response.data)\n        }\n      } catch (error) {\n        console.error(`Erreur lors du chargement du produit ${id}:`, error)\n        // Retirer l'ID invalide des favoris\n        const updatedIds = favoriteIds.filter((fId: any) => fId !== id)\n        localStorage.setItem('userFavorites', JSON.stringify(updatedIds))\n      }\n    }\n\n    favorites.value = favoriteProducts\n  } catch (error) {\n    toast.error('Erreur lors du chargement des favoris')\n    console.error('Error loading favorites:', error)\n    favorites.value = []\n  } finally {\n    isLoading.value = false\n  }\n}\n\nconst removeFromFavorites = async (productId: number) => {\n  try {\n    favorites.value = favorites.value.filter(product => product.id !== productId)\n    \n    // Mettre √† jour localStorage\n    const favoriteIds = favorites.value.map(product => product.id)\n    localStorage.setItem('userFavorites', JSON.stringify(favoriteIds))\n    \n    toast.success('Produit retir√© des favoris')\n  } catch (error) {\n    toast.error('Erreur lors de la suppression')\n    console.error('Error removing from favorites:', error)\n  }\n}\n\nconst clearAllFavorites = async () => {\n  if (confirm('√ätes-vous s√ªr de vouloir vider tous vos favoris ?')) {\n    try {\n      favorites.value = []\n      localStorage.removeItem('userFavorites')\n      toast.success('Tous les favoris ont √©t√© supprim√©s')\n    } catch (error) {\n      toast.error('Erreur lors de la suppression')\n      console.error('Error clearing favorites:', error)\n    }\n  }\n}\n\nconst getProductImage = (product: Product) => {\n  const categorySlug = product.category?.slug || 'accessoires'\n  return categoryImages[categorySlug] || categoryImages['accessoires']\n}\n\nconst addToCart = async (product: Product) => {\n  // Convertir le produit au format attendu par le store\n  const cartProduct: any = {\n    _id: product.id.toString(),\n    name: product.name,\n    description: product.description,\n    price: product.isOnSale && product.salePrice ? product.salePrice : product.price,\n    salePrice: product.salePrice,\n    isOnSale: product.isOnSale,\n    images: [{ url: getProductImage(product), alt: product.name, isPrimary: true }],\n    category: { \n      id: product.categoryId.toString(), \n      name: product.category?.name || 'Sport', \n      slug: product.category?.slug || 'sport' \n    },\n    stock: { \n      quantity: product.stockQuantity, \n      reserved: 0, \n      lowStockThreshold: 5 \n    },\n    slug: product.slug || product.name.toLowerCase().replace(/\\s+/g, '-'),\n    status: 'active' as const,\n    isActive: true,\n    rating: { average: 4.5, count: 100 },\n    salesCount: 50,\n    createdAt: product.createdAt,\n    updatedAt: product.updatedAt\n  }\n  \n  await cartStore.addItem(cartProduct, 1)\n}\n\nconst loadMore = async () => {\n  // Cette fonctionnalit√© n'est plus n√©cessaire car on charge tous les favoris\n  hasMore.value = false\n}\n\nconst formatCurrency = (amount: number) => {\n  return new Intl.NumberFormat('fr-FR', {\n    style: 'currency',\n    currency: 'EUR'\n  }).format(amount)\n}\n\nonMounted(() => {\n  loadFavorites()\n})\n</script>\n\n<style scoped>\n.line-clamp-2 {\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n</style> "],"names":["cartStore","useCartStore","toast","useToast","favorites","ref","isLoading","hasMore","categoryImages","loadFavorites","savedFavorites","favoriteIds","favoriteProducts","id","response","productService","error","updatedIds","fId","removeFromFavorites","productId","product","clearAllFavorites","getProductImage","categorySlug","_a","addToCart","cartProduct","_b","loadMore","formatCurrency","amount","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_cache","_createVNode","_component_router_link","_hoisted_4","_hoisted_5","_hoisted_6","_toDisplayString","_hoisted_7","_hoisted_8","_Fragment","_renderList","_hoisted_9","$event","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_normalizeClass","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26"],"mappings":"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"}