import{d as I,u as L,a as M,r as c,k as N,o as T,c as o,b as e,e as x,w as b,t as l,j as u,n as y,l as $,v as z,i as m,A,F as D,f as E,x as q,B as F,p as Q,g as U,h as i}from"./index-c65d1cd2.js";const G={class:"product-detail"},H={class:"container mx-auto px-4 py-8"},J={class:"flex mb-8","aria-label":"Breadcrumb"},K={class:"inline-flex items-center space-x-1 md:space-x-3"},W={class:"inline-flex items-center"},X={class:"flex items-center"},Y={class:"flex items-center"},Z={class:"ml-1 text-gray-500 md:ml-2"},ee={"aria-current":"page"},te={class:"flex items-center"},se={class:"ml-1 text-gray-500 md:ml-2"},ae={key:0,class:"text-center py-12"},le={key:1,class:"text-center py-12"},oe={class:"text-gray-600 mb-6"},ie={key:2,class:"grid grid-cols-1 lg:grid-cols-2 gap-12"},re={class:"aspect-w-1 aspect-h-1 bg-gray-200 rounded-lg overflow-hidden mb-6 relative"},de=["src","alt"],ne={key:0,class:"absolute top-4 left-4 bg-red-500 text-white px-3 py-2 rounded-full text-sm font-bold"},ue={key:1,class:"absolute top-4 right-4 bg-orange-500 text-white px-3 py-2 rounded-full text-sm"},ce={key:2,class:"absolute top-4 right-4 bg-red-500 text-white px-3 py-2 rounded-full text-sm"},ve={class:"mb-6"},ge={class:"text-3xl font-bold text-gray-900 mb-4"},me={class:"flex items-center space-x-4 mb-4"},pe={key:0,class:"text-4xl font-bold text-red-500"},xe={key:0,class:"text-green-600 font-medium mb-4"},be={class:"mb-8"},ye={class:"text-gray-700 leading-relaxed"},fe={class:"mb-8"},_e={class:"grid grid-cols-2 gap-4 text-sm"},he={class:"flex justify-between py-2 border-b border-gray-200"},ke={class:"font-medium"},we={class:"flex justify-between py-2 border-b border-gray-200"},je={class:"flex justify-between py-2 border-b border-gray-200"},Se={class:"font-medium"},Ce={class:"mb-8"},Pe={class:"flex items-center space-x-4 mb-6"},Qe={class:"flex items-center border border-gray-300 rounded-lg"},Oe=["disabled"],Re=["max"],Ve=["disabled"],Be={class:"flex space-x-4"},Ie=["disabled"],Le={key:0,class:"flex items-center justify-center"},Me={key:1},Ne={key:3,class:"mt-16"},Te={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},$e={class:"aspect-w-1 aspect-h-1 bg-gray-200 rounded-t-lg overflow-hidden"},ze=["src","alt"],Ae={class:"card-body"},De={class:"font-semibold text-lg mb-2 line-clamp-2"},Ee={class:"flex items-center justify-between"},qe={class:"flex items-center space-x-2"},Fe={key:0,class:"text-red-500 font-bold"},He=I({__name:"ProductDetailView",setup(Ue){const f=q();F();const O=L(),w=M(),s=c(null),_=c([]),h=c(!0),v=c(null),d=c(1),g=c(!1);c(null);const R={chaussures:"/images/categories/chaussures.jpg",musculation:"/images/categories/musculation.jpg","yoga-pilates":"/images/categories/yoga.jpg","electronique-sport":"/images/categories/electronique.jpg",accessoires:"/images/categories/accessoires.jpg",nutrition:"/images/categories/nutrition.jpg",cardio:"/images/categories/cardio.jpg","sports-combat":"/images/categories/combat.jpg"},V=a=>a===0?"text-red-600":a<=5?"text-orange-600":"text-green-600",k=a=>{var t;return(t=a.category)!=null&&t.slug&&R[a.category.slug]||"/placeholder.jpg"},B=async()=>{if(s.value){g.value=!0;try{const a={...s.value,_id:s.value.id.toString(),stock:{quantity:s.value.stockQuantity,reserved:0,lowStockThreshold:5},images:[{url:k(s.value),alt:s.value.name,isPrimary:!0}]};await O.addItem(a,d.value),w.success(`${d.value} ${s.value.name} ajout√©(s) au panier`)}catch(a){console.error("Erreur lors de l'ajout au panier:",a),w.error("Erreur lors de l'ajout au panier")}finally{g.value=!1}}},j=async()=>{try{h.value=!0,v.value=null;const a=f.params.id,t=await Q.getProduct(a);if(t.success&&t.data){if(s.value=t.data,s.value&&s.value.categoryId){const n=await Q.getProducts({category:s.value.categoryId.toString(),limit:4});n.success&&n.data&&n.data.products&&(_.value=n.data.products.filter(p=>p.id!==s.value.id))}}else v.value="Le produit demand√© n'existe pas ou n'est plus disponible."}catch(a){console.error("Erreur lors du chargement du produit:",a),v.value="Erreur lors du chargement du produit."}finally{h.value=!1}};return N(()=>f.params.id,()=>{var a;f.params.id!==((a=s.value)==null?void 0:a.id.toString())&&j()}),T(()=>{j()}),(a,t)=>{var p,S,C,P;const n=U("router-link");return i(),o("div",G,[e("div",H,[e("nav",J,[e("ol",K,[e("li",W,[x(n,{to:"/",class:"text-gray-700 hover:text-blue-600"},{default:b(()=>t[3]||(t[3]=[m(" Accueil ")])),_:1,__:[3]})]),e("li",null,[e("div",X,[t[5]||(t[5]=e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),x(n,{to:"/products",class:"ml-1 text-gray-700 hover:text-blue-600 md:ml-2"},{default:b(()=>t[4]||(t[4]=[m(" Produits ")])),_:1,__:[4]})])]),e("li",null,[e("div",Y,[t[6]||(t[6]=e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),e("span",Z,l((S=(p=s.value)==null?void 0:p.category)==null?void 0:S.name),1)])]),e("li",ee,[e("div",te,[t[7]||(t[7]=e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),e("span",se,l((C=s.value)==null?void 0:C.name),1)])])])]),h.value?(i(),o("div",ae,t[8]||(t[8]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),e("p",{class:"mt-2"},"Chargement du produit...",-1)]))):v.value?(i(),o("div",le,[t[10]||(t[10]=e("div",{class:"text-red-500 text-6xl mb-4"},"üòû",-1)),t[11]||(t[11]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Produit non trouv√©",-1)),e("p",oe,l(v.value),1),x(n,{to:"/products",class:"btn btn-primary"},{default:b(()=>t[9]||(t[9]=[m(" Retour aux produits ")])),_:1,__:[9]})])):s.value?(i(),o("div",ie,[e("div",null,[e("div",re,[e("img",{src:k(s.value),alt:s.value.name,class:"w-full h-96 object-cover"},null,8,de),s.value.isOnSale?(i(),o("div",ne," PROMOTION -"+l(Math.round((s.value.price-(s.value.salePrice||0))/s.value.price*100))+"% ",1)):u("",!0),s.value.stockQuantity<=5&&s.value.stockQuantity>0?(i(),o("div",ue," Stock faible ")):u("",!0),s.value.stockQuantity===0?(i(),o("div",ce," Rupture de stock ")):u("",!0)])]),e("div",null,[e("div",ve,[e("h1",ge,l(s.value.name),1),e("div",me,[s.value.isOnSale&&s.value.salePrice?(i(),o("span",pe,l(s.value.salePrice)+"‚Ç¨ ",1)):u("",!0),e("span",{class:y(s.value.isOnSale&&s.value.salePrice?"line-through text-gray-400 text-2xl":"text-4xl font-bold text-gray-900")},l(s.value.price)+"‚Ç¨ ",3)]),s.value.isOnSale&&s.value.salePrice?(i(),o("div",xe," Vous √©conomisez "+l((s.value.price-s.value.salePrice).toFixed(2))+"‚Ç¨ ",1)):u("",!0)]),e("div",be,[t[12]||(t[12]=e("h3",{class:"text-xl font-semibold mb-3"},"Description",-1)),e("p",ye,l(s.value.description),1)]),e("div",fe,[t[16]||(t[16]=e("h3",{class:"text-xl font-semibold mb-3"},"Informations",-1)),e("div",_e,[e("div",he,[t[13]||(t[13]=e("span",{class:"text-gray-600"},"Cat√©gorie :",-1)),e("span",ke,l((P=s.value.category)==null?void 0:P.name),1)]),e("div",we,[t[14]||(t[14]=e("span",{class:"text-gray-600"},"Stock :",-1)),e("span",{class:y(["font-medium",V(s.value.stockQuantity)])},l(s.value.stockQuantity)+" unit√©(s) ",3)]),e("div",je,[t[15]||(t[15]=e("span",{class:"text-gray-600"},"R√©f√©rence :",-1)),e("span",Se,l(s.value.slug),1)])])]),e("div",Ce,[e("div",Pe,[t[17]||(t[17]=e("label",{class:"text-lg font-medium text-gray-700"},"Quantit√© :",-1)),e("div",Qe,[e("button",{onClick:t[0]||(t[0]=r=>d.value>1&&d.value--),disabled:d.value<=1,class:"px-4 py-2 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," - ",8,Oe),$(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>d.value=r),type:"number",min:"1",max:s.value.stockQuantity,class:"w-20 text-center border-0 focus:ring-0"},null,8,Re),[[z,d.value,void 0,{number:!0}]]),e("button",{onClick:t[2]||(t[2]=r=>d.value<s.value.stockQuantity&&d.value++),disabled:d.value>=s.value.stockQuantity,class:"px-4 py-2 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," + ",8,Ve)])]),e("div",Be,[e("button",{onClick:B,disabled:!s.value.stockQuantity||g.value,class:y(["flex-1 btn btn-primary py-4 text-lg",{"opacity-50 cursor-not-allowed":!s.value.stockQuantity||g.value}])},[g.value?(i(),o("span",Le,t[18]||(t[18]=[e("div",{class:"w-5 h-5 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1),m(" Ajout en cours... ")]))):(i(),o("span",Me,l(s.value.stockQuantity?`Ajouter au panier (${d.value})`:"Rupture de stock"),1))],10,Ie),t[19]||(t[19]=e("button",{class:"btn btn-outline py-4 px-6"}," ‚ù§Ô∏è ",-1)),t[20]||(t[20]=e("button",{class:"btn btn-outline py-4 px-6"}," üì§ ",-1))])]),t[21]||(t[21]=A('<div class="border-t pt-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm"><div class="flex items-start"><div class="text-green-500 mr-3 mt-1">üöö</div><div><div class="font-medium">Livraison gratuite</div><div class="text-gray-600">√Ä partir de 50‚Ç¨ d&#39;achat</div></div></div><div class="flex items-start"><div class="text-blue-500 mr-3 mt-1">‚Ü©Ô∏è</div><div><div class="font-medium">Retour gratuit</div><div class="text-gray-600">Sous 30 jours</div></div></div><div class="flex items-start"><div class="text-purple-500 mr-3 mt-1">üîí</div><div><div class="font-medium">Paiement s√©curis√©</div><div class="text-gray-600">SSL et 3D Secure</div></div></div><div class="flex items-start"><div class="text-orange-500 mr-3 mt-1">üìû</div><div><div class="font-medium">Support client</div><div class="text-gray-600">7j/7 de 9h √† 18h</div></div></div></div></div>',1))])])):u("",!0),s.value&&_.value.length>0?(i(),o("div",Ne,[t[23]||(t[23]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-8"},"Produits similaires",-1)),e("div",Te,[(i(!0),o(D,null,E(_.value,r=>(i(),o("div",{key:r.id,class:"card hover:shadow-lg transition-shadow"},[e("div",$e,[e("img",{src:k(r),alt:r.name,class:"w-full h-48 object-cover"},null,8,ze)]),e("div",Ae,[e("h3",De,l(r.name),1),e("div",Ee,[e("div",qe,[r.isOnSale?(i(),o("span",Fe,l(r.salePrice)+"‚Ç¨ ",1)):u("",!0),e("span",{class:y(r.isOnSale?"line-through text-gray-400":"font-bold text-gray-900")},l(r.price)+"‚Ç¨ ",3)]),x(n,{to:`/products/${r.id}`,class:"btn btn-primary btn-sm"},{default:b(()=>t[22]||(t[22]=[m(" Voir ")])),_:2,__:[22]},1032,["to"])])])]))),128))])])):u("",!0)])])}}});export{He as default};
//# sourceMappingURL=ProductDetailView-9f305e5d.js.map
