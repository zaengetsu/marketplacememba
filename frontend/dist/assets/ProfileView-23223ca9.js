import{d as H,C as K,a as Q,r as h,G as W,o as X,c as d,b as e,t as n,D as t,F as D,f as M,l as u,v as f,n as g,j as c,e as Y,w as Z,q as k,m as j,g as ee,h as i,i as L}from"./index-c65d1cd2.js";import{o as T,c as P,s as _,u as A}from"./useForm-3cd6812b.js";const se={class:"profile-view min-h-screen bg-gray-50"},te={class:"container mx-auto px-4 py-8"},re={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},oe={class:"lg:col-span-1"},ae={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ne={class:"flex items-center mb-6"},le={class:"w-16 h-16 bg-gradient-to-r from-orange-500 to-red-600 rounded-full flex items-center justify-center text-white text-xl font-bold"},de={class:"ml-4"},ie={class:"font-semibold text-gray-900"},ue={class:"text-sm text-gray-600"},me={class:"space-y-2"},ce=["onClick"],pe={class:"mr-3"},ge={class:"lg:col-span-2"},fe={class:"bg-white rounded-lg shadow-sm border border-gray-200"},be={key:0,class:"p-6"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ye={key:0,class:"text-red-500 text-sm mt-1"},xe={key:0,class:"text-red-500 text-sm mt-1"},we={key:0,class:"text-red-500 text-sm mt-1"},he={key:0,class:"text-red-500 text-sm mt-1"},Pe={class:"flex justify-end"},_e=["disabled"],ke={key:1,class:"p-6"},Ne={key:0,class:"text-red-500 text-sm mt-1"},Se={key:0,class:"text-red-500 text-sm mt-1"},Ee={key:0,class:"text-red-500 text-sm mt-1"},Ue={class:"flex justify-end"},Ce=["disabled"],Ve={key:2,class:"p-6"},De={class:"flex justify-between items-center mb-6"},Me={class:"space-y-4"},je={class:"flex justify-between items-start mb-2"},Le={class:"font-medium text-gray-900"},Te={class:"text-sm text-gray-600"},Ae={class:"flex justify-between items-center"},Fe={class:"text-sm text-gray-600"},Ie={class:"font-semibold text-gray-900"},Re={key:0,class:"text-center py-8 text-gray-500"},Be={key:3,class:"p-6"},$e={class:"space-y-6"},Oe={class:"space-y-3"},ze={class:"flex items-center"},Ge={class:"flex items-center"},qe={class:"flex items-center"},Je={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},He={class:"flex justify-end"},Ke=["disabled"],Ze=H({__name:"ProfileView",setup(Qe){var S,E,U;const p=K(),v=Q(),y=h("personal"),w=h(!1),F=[{id:"personal",label:"Informations personnelles",icon:"👤"},{id:"password",label:"Mot de passe",icon:"🔒"},{id:"orders",label:"Mes commandes",icon:"📦"},{id:"preferences",label:"Préférences",icon:"⚙️"}],I=W(()=>{var b,x;const o=((b=p.user)==null?void 0:b.firstName)||"",s=((x=p.user)==null?void 0:x.lastName)||"";return`${o.charAt(0)}${s.charAt(0)}`.toUpperCase()}),R=T({firstName:P.name,lastName:P.name,email:P.email,phone:_().optional(),birthDate:_().optional()}),a=A({initialData:{firstName:((S=p.user)==null?void 0:S.firstName)||"",lastName:((E=p.user)==null?void 0:E.lastName)||"",email:((U=p.user)==null?void 0:U.email)||"",phone:"",birthDate:""},validationSchema:R,onSubmit:async()=>{await new Promise(o=>setTimeout(o,1e3)),v.success("Informations personnelles mises à jour")}}),B=T({currentPassword:_().min(1,"Mot de passe actuel requis"),newPassword:P.password,confirmPassword:_()}).refine(o=>o.newPassword===o.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),l=A({initialData:{currentPassword:"",newPassword:"",confirmPassword:""},validationSchema:B,onSubmit:async o=>{try{const b=await(await fetch("/api/auth/renew-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.token}`},body:JSON.stringify({currentPassword:o.currentPassword,newPassword:o.newPassword})})).json();b.success?(v.success("Mot de passe modifié avec succès"),l.reset()):v.error(b.error||"Erreur lors du changement de mot de passe")}catch{v.error("Erreur serveur")}}}),N=h([{id:"12345",createdAt:new Date("2024-01-15"),status:"delivered",itemsCount:3,total:159.99},{id:"12344",createdAt:new Date("2024-01-10"),status:"shipped",itemsCount:1,total:89.99},{id:"12343",createdAt:new Date("2024-01-05"),status:"processing",itemsCount:2,total:199.99}]),m=h({emailNotifications:!0,promotionalEmails:!1,orderUpdates:!0,language:"fr",currency:"EUR"}),$=o=>{a.handleSubmit(o)},O=o=>{l.handleSubmit(o)},z=async()=>{w.value=!0;try{await new Promise(o=>setTimeout(o,1e3)),v.success("Préférences sauvegardées")}catch{v.error("Erreur lors de la sauvegarde")}finally{w.value=!1}},G=o=>new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"long",day:"numeric"}).format(o),q=o=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(o),J=o=>({pending:"En attente",processing:"En cours",shipped:"Expédiée",delivered:"Livrée",cancelled:"Annulée"})[o]||o;return X(()=>{const o=localStorage.getItem("userPreferences");if(o)try{m.value={...m.value,...JSON.parse(o)}}catch(s){console.error("Error loading preferences:",s)}}),(o,s)=>{var x,C,V;const b=ee("router-link");return i(),d("div",se,[e("div",te,[s[35]||(s[35]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Mon Profil"),e("p",{class:"text-gray-600"},"Gérez vos informations personnelles et vos préférences")],-1)),e("div",re,[e("div",oe,[e("div",ae,[e("div",ne,[e("div",le,n(I.value),1),e("div",de,[e("h3",ie,n((x=t(p).user)==null?void 0:x.firstName)+" "+n((C=t(p).user)==null?void 0:C.lastName),1),e("p",ue,n((V=t(p).user)==null?void 0:V.email),1)])]),e("nav",me,[(i(),d(D,null,M(F,r=>e("button",{key:r.id,onClick:We=>y.value=r.id,class:g(["w-full text-left px-4 py-3 rounded-lg transition-colors",y.value===r.id?"bg-orange-50 text-orange-600 border border-orange-200":"text-gray-700 hover:bg-gray-50"])},[e("span",pe,n(r.icon),1),L(" "+n(r.label),1)],10,ce)),64))])])]),e("div",ge,[e("div",fe,[y.value==="personal"?(i(),d("div",be,[s[18]||(s[18]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Informations personnelles",-1)),e("form",{onSubmit:$,class:"space-y-6"},[e("div",ve,[e("div",null,[s[13]||(s[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Prénom",-1)),u(e("input",{"onUpdate:modelValue":s[0]||(s[0]=r=>t(a).data.firstName=r),type:"text",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",{"border-red-500":t(a).errors.value.firstName}])},null,2),[[f,t(a).data.firstName]]),t(a).errors.value.firstName?(i(),d("p",ye,n(t(a).errors.value.firstName),1)):c("",!0)]),e("div",null,[s[14]||(s[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom",-1)),u(e("input",{"onUpdate:modelValue":s[1]||(s[1]=r=>t(a).data.lastName=r),type:"text",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",{"border-red-500":t(a).errors.value.lastName}])},null,2),[[f,t(a).data.lastName]]),t(a).errors.value.lastName?(i(),d("p",xe,n(t(a).errors.value.lastName),1)):c("",!0)])]),e("div",null,[s[15]||(s[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),u(e("input",{"onUpdate:modelValue":s[2]||(s[2]=r=>t(a).data.email=r),type:"email",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",{"border-red-500":t(a).errors.value.email}])},null,2),[[f,t(a).data.email]]),t(a).errors.value.email?(i(),d("p",we,n(t(a).errors.value.email),1)):c("",!0)]),e("div",null,[s[16]||(s[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),u(e("input",{"onUpdate:modelValue":s[3]||(s[3]=r=>t(a).data.phone=r),type:"tel",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",{"border-red-500":t(a).errors.value.phone}])},null,2),[[f,t(a).data.phone]]),t(a).errors.value.phone?(i(),d("p",he,n(t(a).errors.value.phone),1)):c("",!0)]),e("div",null,[s[17]||(s[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de naissance",-1)),u(e("input",{"onUpdate:modelValue":s[4]||(s[4]=r=>t(a).data.birthDate=r),type:"date",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"},null,512),[[f,t(a).data.birthDate]])]),e("div",Pe,[e("button",{type:"submit",disabled:t(a).isLoading.value,class:"px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:from-orange-600 hover:to-red-700 transition-all disabled:opacity-50"},n(t(a).isLoading?"Enregistrement...":"Enregistrer"),9,_e)])],32)])):c("",!0),y.value==="password"?(i(),d("div",ke,[s[22]||(s[22]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Changer le mot de passe",-1)),e("form",{onSubmit:O,class:"space-y-6"},[e("div",null,[s[19]||(s[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mot de passe actuel",-1)),u(e("input",{"onUpdate:modelValue":s[5]||(s[5]=r=>t(l).data.currentPassword=r),type:"password",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",{"border-red-500":t(l).errors.value.currentPassword}])},null,2),[[f,t(l).data.currentPassword]]),t(l).errors.value.currentPassword?(i(),d("p",Ne,n(t(l).errors.value.currentPassword),1)):c("",!0)]),e("div",null,[s[20]||(s[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nouveau mot de passe",-1)),u(e("input",{"onUpdate:modelValue":s[6]||(s[6]=r=>t(l).data.newPassword=r),type:"password",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",{"border-red-500":t(l).errors.value.newPassword}])},null,2),[[f,t(l).data.newPassword]]),t(l).errors.value.newPassword?(i(),d("p",Se,n(t(l).errors.value.newPassword),1)):c("",!0)]),e("div",null,[s[21]||(s[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Confirmer le nouveau mot de passe",-1)),u(e("input",{"onUpdate:modelValue":s[7]||(s[7]=r=>t(l).data.confirmPassword=r),type:"password",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",{"border-red-500":t(l).errors.value.confirmPassword}])},null,2),[[f,t(l).data.confirmPassword]]),t(l).errors.value.confirmPassword?(i(),d("p",Ee,n(t(l).errors.value.confirmPassword),1)):c("",!0)]),e("div",Ue,[e("button",{type:"submit",disabled:t(l).isLoading.value,class:"px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:from-orange-600 hover:to-red-700 transition-all disabled:opacity-50"},n(t(l).isLoading?"Modification...":"Modifier le mot de passe"),9,Ce)])],32)])):c("",!0),y.value==="orders"?(i(),d("div",Ve,[e("div",De,[s[24]||(s[24]=e("h2",{class:"text-xl font-semibold text-gray-900"},"Mes commandes",-1)),Y(b,{to:"/orders",class:"text-orange-600 hover:text-orange-700 font-medium"},{default:Z(()=>s[23]||(s[23]=[L(" Voir toutes les commandes → ")])),_:1,__:[23]})]),e("div",Me,[(i(!0),d(D,null,M(N.value,r=>(i(),d("div",{key:r.id,class:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"},[e("div",je,[e("div",null,[e("h3",Le,"Commande #"+n(r.id),1),e("p",Te,n(G(r.createdAt)),1)]),e("span",{class:g(["px-3 py-1 rounded-full text-xs font-medium",r.status==="delivered"?"bg-green-100 text-green-800":r.status==="shipped"?"bg-blue-100 text-blue-800":r.status==="processing"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},n(J(r.status)),3)]),e("div",Ae,[e("p",Fe,n(r.itemsCount)+" article(s)",1),e("p",Ie,n(q(r.total)),1)])]))),128)),N.value.length===0?(i(),d("div",Re," Aucune commande récente ")):c("",!0)])])):c("",!0),y.value==="preferences"?(i(),d("div",Be,[s[34]||(s[34]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Préférences",-1)),e("div",$e,[e("div",null,[s[28]||(s[28]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Notifications",-1)),e("div",Oe,[e("label",ze,[u(e("input",{"onUpdate:modelValue":s[8]||(s[8]=r=>m.value.emailNotifications=r),type:"checkbox",class:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"},null,512),[[k,m.value.emailNotifications]]),s[25]||(s[25]=e("span",{class:"ml-3 text-gray-700"},"Recevoir les notifications par email",-1))]),e("label",Ge,[u(e("input",{"onUpdate:modelValue":s[9]||(s[9]=r=>m.value.promotionalEmails=r),type:"checkbox",class:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"},null,512),[[k,m.value.promotionalEmails]]),s[26]||(s[26]=e("span",{class:"ml-3 text-gray-700"},"Recevoir les offres promotionnelles",-1))]),e("label",qe,[u(e("input",{"onUpdate:modelValue":s[10]||(s[10]=r=>m.value.orderUpdates=r),type:"checkbox",class:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"},null,512),[[k,m.value.orderUpdates]]),s[27]||(s[27]=e("span",{class:"ml-3 text-gray-700"},"Notifications de suivi de commande",-1))])])]),e("div",null,[s[33]||(s[33]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Langue et région",-1)),e("div",Je,[e("div",null,[s[30]||(s[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Langue",-1)),u(e("select",{"onUpdate:modelValue":s[11]||(s[11]=r=>m.value.language=r),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"},s[29]||(s[29]=[e("option",{value:"fr"},"Français",-1),e("option",{value:"en"},"English",-1),e("option",{value:"es"},"Español",-1)]),512),[[j,m.value.language]])]),e("div",null,[s[32]||(s[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Devise",-1)),u(e("select",{"onUpdate:modelValue":s[12]||(s[12]=r=>m.value.currency=r),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"},s[31]||(s[31]=[e("option",{value:"EUR"},"Euro (€)",-1),e("option",{value:"USD"},"Dollar ($)",-1),e("option",{value:"GBP"},"Livre (£)",-1)]),512),[[j,m.value.currency]])])])]),e("div",He,[e("button",{onClick:z,disabled:w.value,class:"px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:from-orange-600 hover:to-red-700 transition-all disabled:opacity-50"},n(w.value?"Enregistrement...":"Enregistrer les préférences"),9,Ke)])])])):c("",!0)])])])])])}}});export{Ze as default};
//# sourceMappingURL=ProfileView-23223ca9.js.map
