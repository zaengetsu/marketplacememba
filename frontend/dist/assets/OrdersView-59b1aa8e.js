import{u as $}from"./orders-e52484dc.js";import{d as O,r as k,o as j,c as r,b as e,D as p,e as V,w as B,F as w,f as C,j as c,t as l,n as g,g as L,h as a,i as N}from"./index-c65d1cd2.js";const z={class:"orders-view"},R={class:"container mx-auto px-4 py-8"},T={key:0,class:"text-center py-16"},I={key:1,class:"text-center py-16"},M={key:2,class:"space-y-6"},P={class:"card-body"},q={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-4"},G={class:"text-lg font-semibold"},H={class:"text-gray-600 text-sm"},J={class:"mt-2 md:mt-0 flex items-center space-x-4"},K={class:"text-lg font-semibold"},Q={class:"flex flex-wrap gap-2"},U=["onClick"],W=["onClick"],X=["onClick"],Y={key:0,class:"flex justify-center mt-8"},Z={class:"flex space-x-2"},ee=["onClick"],te={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},se={class:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto"},ne={class:"p-6"},oe={class:"flex justify-between items-center mb-4"},le={class:"text-xl font-semibold"},re={class:"space-y-4"},ae={class:"text-xl font-semibold"},ie={class:"text-gray-600"},de={class:"text-gray-600"},ce={class:"flex justify-end mt-6"},ge=O({__name:"OrdersView",setup(ue){const i=$(),o=k(null),d=k(null);j(async()=>{await u()});const u=async(n=1)=>{try{const t=await i.fetchOrders({page:n,limit:10});d.value=t.pagination}catch(t){console.error("Erreur lors du chargement des commandes:",t),alert(`Erreur: ${t.message}`)}},A=n=>{u(n)},E=async n=>{try{const t=await i.fetchOrderById(n.toString());o.value=t}catch(t){console.error("Erreur lors du chargement des dÃ©tails:",t),alert(`Erreur: ${t.message}`)}},S=async n=>{console.log("Recommander les articles de la commande:",n),alert("FonctionnalitÃ© Ã  implÃ©menter: ajouter les articles au panier")},D=async n=>{if(confirm("ÃŠtes-vous sÃ»r de vouloir annuler cette commande ?"))try{console.log("Annuler la commande:",n),alert("Commande annulÃ©e (fonctionnalitÃ© Ã  implÃ©menter)"),await u()}catch(t){console.error("Erreur lors de l'annulation:",t),alert(`Erreur: ${t.message}`)}},v=n=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",processing:"bg-purple-100 text-purple-800",shipped:"bg-indigo-100 text-indigo-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[n]||"bg-gray-100 text-gray-800",x=n=>({pending:"En attente",confirmed:"ConfirmÃ©e",processing:"En traitement",shipped:"ExpÃ©diÃ©e",delivered:"LivrÃ©e",cancelled:"AnnulÃ©e"})[n]||n,b=n=>new Date(n).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(n,t)=>{var f,y,_,h;const F=L("router-link");return a(),r("div",z,[e("div",R,[t[7]||(t[7]=e("h1",{class:"text-3xl font-bold mb-8"},"Mes Commandes",-1)),p(i).isLoading?(a(),r("div",T,t[2]||(t[2]=[e("div",{class:"inline-block w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des commandes...",-1)]))):p(i).orders.length===0?(a(),r("div",I,[t[4]||(t[4]=e("div",{class:"text-6xl mb-4"},"ðŸ“¦",-1)),t[5]||(t[5]=e("h2",{class:"text-2xl font-semibold mb-4"},"Aucune commande",-1)),t[6]||(t[6]=e("p",{class:"text-gray-600 mb-8"},"Vous n'avez pas encore passÃ© de commande",-1)),V(F,{to:"/",class:"btn btn-primary"},{default:B(()=>t[3]||(t[3]=[N(" DÃ©couvrir nos produits ")])),_:1,__:[3]})])):(a(),r("div",M,[(a(!0),r(w,null,C(p(i).orders,s=>(a(),r("div",{key:s.id,class:"card"},[e("div",P,[e("div",q,[e("div",null,[e("h3",G,"Commande #"+l(s.id),1),e("p",H," PassÃ©e le "+l(b(s.createdAt)),1)]),e("div",J,[e("span",{class:g([v(s.status),"px-3 py-1 rounded-full text-sm font-medium"])},l(x(s.status)),3),e("span",K,l(parseFloat(s.total.toString()).toFixed(2))+"â‚¬",1)])]),e("div",Q,[e("button",{onClick:m=>E(s.id),class:"btn btn-outline btn-sm"}," Voir dÃ©tails ",8,U),s.status==="delivered"?(a(),r("button",{key:0,onClick:m=>S(s.id),class:"btn btn-primary btn-sm"}," Recommander ",8,W)):c("",!0),["pending","confirmed"].includes(s.status)?(a(),r("button",{key:1,onClick:m=>D(s.id),class:"btn btn-outline btn-sm text-red-600 border-red-600 hover:bg-red-600 hover:text-white"}," Annuler ",8,X)):c("",!0)])])]))),128)),d.value&&d.value.pages>1?(a(),r("div",Y,[e("div",Z,[(a(!0),r(w,null,C(d.value.pages,s=>(a(),r("button",{key:s,onClick:m=>A(s),class:g(["px-3 py-2 rounded-md text-sm font-medium",s===d.value.page?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},l(s),11,ee))),128))])])):c("",!0)]))]),o.value?(a(),r("div",te,[e("div",se,[e("div",ne,[e("div",oe,[e("h2",le,"DÃ©tails de la commande #"+l(o.value.id),1),e("button",{onClick:t[0]||(t[0]=s=>o.value=null),class:"text-gray-500 hover:text-gray-700"}," âœ• ")]),e("div",re,[e("div",null,[t[8]||(t[8]=e("h3",{class:"font-medium mb-2"},"Statut",-1)),e("span",{class:g([v(o.value.status),"px-3 py-1 rounded-full text-sm font-medium"])},l(x(o.value.status)),3)]),e("div",null,[t[9]||(t[9]=e("h3",{class:"font-medium mb-2"},"Total",-1)),e("span",ae,l(parseFloat(o.value.total.toString()).toFixed(2))+"â‚¬",1)]),e("div",null,[t[10]||(t[10]=e("h3",{class:"font-medium mb-2"},"Adresse de livraison",-1)),e("div",ie,[e("p",null,l((f=o.value.shippingAddress)==null?void 0:f.street),1),e("p",null,l((y=o.value.shippingAddress)==null?void 0:y.postalCode)+" "+l((_=o.value.shippingAddress)==null?void 0:_.city),1),e("p",null,l((h=o.value.shippingAddress)==null?void 0:h.country),1)])]),e("div",null,[t[11]||(t[11]=e("h3",{class:"font-medium mb-2"},"Date de commande",-1)),e("p",de,l(b(o.value.createdAt)),1)])]),e("div",ce,[e("button",{onClick:t[1]||(t[1]=s=>o.value=null),class:"btn btn-outline"}," Fermer ")])])])])):c("",!0)])}}});export{ge as default};
//# sourceMappingURL=OrdersView-59b1aa8e.js.map
