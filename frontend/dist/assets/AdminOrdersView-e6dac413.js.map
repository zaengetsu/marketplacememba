{"version":3,"file":"AdminOrdersView-e6dac413.js","sources":["../../src/views/admin/AdminOrdersView.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mx-auto px-4 py-8\">\r\n    <h1 class=\"text-2xl font-bold mb-4\">Liste des commandes</h1>\r\n\r\n    <!-- Recherche et filtre -->\r\n    <div class=\"flex flex-wrap gap-4 mb-6\">\r\n      <input\r\n        v-model=\"search\"\r\n        @input=\"onSearch\"\r\n        class=\"input input-bordered\"\r\n        placeholder=\"Recherche utilisateur...\"\r\n        style=\"min-width:200px\"\r\n      />\r\n      <select v-model=\"status\" @change=\"onSearch\" class=\"input input-bordered\">\r\n        <option value=\"\">Tous statuts</option>\r\n        <option v-for=\"s in statuses\" :key=\"s\" :value=\"s\">{{ s }}</option>\r\n      </select>\r\n    </div>\r\n\r\n    <table class=\"min-w-full bg-white mt-2\">\r\n      <thead>\r\n        <tr>\r\n          <th class=\"py-2 px-4 border-b\">ID</th>\r\n          <th class=\"py-2 px-4 border-b\">Utilisateur</th>\r\n          <th class=\"py-2 px-4 border-b\">Statut</th>\r\n          <th class=\"py-2 px-4 border-b\">Total</th>\r\n          <th class=\"py-2 px-4 border-b\">Date</th>\r\n          <th class=\"py-2 px-4 border-b\">Actions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"order in orders\" :key=\"order.id\">\r\n          <td class=\"py-2 px-4 border-b\">{{ order.id }}</td>\r\n          <td class=\"py-2 px-4 border-b\">\r\n            {{ order.user?.firstName }} {{ order.user?.lastName }}\r\n            <span v-if=\"!order.user\">-</span>\r\n          </td>\r\n          <td class=\"py-2 px-4 border-b\">{{ order.status }}</td>\r\n          <td class=\"py-2 px-4 border-b\">{{ order.total }} €</td>\r\n          <td class=\"py-2 px-4 border-b\">{{ formatDate(order.createdAt) }}</td>\r\n          <td class=\"py-2 px-4 border-b\">\r\n            <button class=\"btn btn-xs btn-outline\">Voir</button>\r\n          </td>\r\n        </tr>\r\n        <tr v-if=\"orders.length === 0\">\r\n          <td class=\"py-2 px-4 border-b\" colspan=\"6\" align=\"center\">Aucune commande</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    <!-- Pagination -->\r\n    <div class=\"flex justify-center items-center gap-2 mt-6\" v-if=\"pagination.pages > 1\">\r\n      <button class=\"btn btn-sm\" :disabled=\"pagination.page === 1\" @click=\"changePage(pagination.page - 1)\">Précédent</button>\r\n      <span>Page {{ pagination.page }} / {{ pagination.pages }}</span>\r\n      <button class=\"btn btn-sm\" :disabled=\"pagination.page === pagination.pages\" @click=\"changePage(pagination.page + 1)\">Suivant</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted } from 'vue'\r\nimport apiClient from '@/services/api'\r\n\r\nconst orders = ref<any[]>([])\r\nconst pagination = ref({ page: 1, limit: 10, total: 0, pages: 1 })\r\nconst search = ref('')\r\nconst status = ref('')\r\nconst statuses = ['pending', 'confirmed', 'processing', 'shipped', 'delivered', 'cancelled', 'refunded']\r\n\r\nconst fetchOrders = async () => {\r\n  try {\r\n    const params: any = {\r\n      page: pagination.value.page,\r\n      limit: pagination.value.limit,\r\n    }\r\n    if (search.value) params.search = search.value\r\n    if (status.value) params.status = status.value\r\n\r\n    const response = await apiClient.get('/admin/orders', { params })\r\n    if (response.data.success) {\r\n      orders.value = response.data.data.orders\r\n      pagination.value = response.data.data.pagination\r\n    }\r\n  } catch (e) {\r\n    orders.value = []\r\n    pagination.value = { page: 1, limit: 10, total: 0, pages: 1 }\r\n  }\r\n}\r\n\r\nconst changePage = (page: number) => {\r\n  pagination.value.page = page\r\n  fetchOrders()\r\n}\r\n\r\nconst onSearch = () => {\r\n  pagination.value.page = 1\r\n  fetchOrders()\r\n}\r\n\r\nconst formatDate = (date: string) => {\r\n  return new Date(date).toLocaleString('fr-FR')\r\n}\r\n\r\nonMounted(fetchOrders)\r\n</script>"],"names":["orders","ref","pagination","search","status","statuses","fetchOrders","params","response","apiClient","changePage","page","onSearch","formatDate","date","onMounted","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_hoisted_2","$event","_Fragment","_renderList","_hoisted_3","_hoisted_4","order","_hoisted_5","_toDisplayString","_hoisted_6","_createTextVNode","_a","_b","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14"],"mappings":"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"}