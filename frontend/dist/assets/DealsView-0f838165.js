import{d as R,u as $,a as U,r as i,G as H,o as G,L as K,c as a,b as s,t as r,F as T,f as z,j as w,l as W,v as X,p as Y,h as n,n as k,_ as Z}from"./index-c65d1cd2.js";const ee={class:"deals-view min-h-screen bg-gray-50"},te={class:"bg-gradient-to-r from-red-600 to-orange-600 text-white"},se={class:"container mx-auto px-4 py-8"},oe={class:"text-center"},re={class:"flex justify-center items-center space-x-4 mb-6"},ie={class:"text-center"},ae={class:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2"},ne={class:"text-2xl font-bold"},le={class:"text-center"},ce={class:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2"},de={class:"text-2xl font-bold"},ue={class:"text-center"},ge={class:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2"},me={class:"text-2xl font-bold"},pe={class:"container mx-auto px-4 py-8"},ve={class:"mb-8"},fe={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},he=["onClick"],be={class:"font-semibold"},xe={key:0,class:"text-center py-16"},ye={key:1},_e={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},we={class:"relative aspect-square overflow-hidden"},ke=["src","alt"],Se={class:"absolute top-3 left-3 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold"},Pe={key:1,class:"absolute bottom-3 left-3 bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-medium"},Ce={class:"p-4"},Fe={class:"mb-2"},De={class:"text-xs text-gray-500 uppercase tracking-wide"},Ie={class:"font-semibold text-gray-900 mb-2 line-clamp-2"},Ve={class:"flex items-center justify-between mb-4"},Ae={class:"flex items-center space-x-2"},Te={class:"text-lg font-bold text-red-600"},ze={class:"text-sm text-gray-500 line-through"},Ee={class:"text-sm font-medium text-green-600"},Le={class:"flex space-x-2"},Me=["onClick","disabled"],Oe=["onClick"],je={key:0,class:"text-center mt-8"},qe=["disabled"],Ne={key:2,class:"text-center py-16"},Qe={class:"mt-16 bg-gradient-to-r from-orange-500 to-red-600 rounded-lg text-white p-8"},Be={class:"text-center"},Je={class:"flex flex-col sm:flex-row max-w-md mx-auto gap-4"},Re=["disabled"],S=8,$e=R({__name:"DealsView",setup(Ue){const E=$(),l=U(),h=i([]),P=i([]),d=i(!0),p=i("all"),u=i(1),b=i(0),g=i(""),v=i(!1),L=i(new Date(Date.now()+24*60*60*1e3)),m=i({hours:0,minutes:0,seconds:0}),C={chaussures:"https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=500&h=500&fit=crop",musculation:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=500&h=500&fit=crop","yoga-pilates":"https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=500&h=500&fit=crop","electronique-sport":"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&h=500&fit=crop",accessoires:"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=500&h=500&fit=crop",nutrition:"https://images.unsplash.com/photo-1593095948071-474c5cc2989d?w=500&h=500&fit=crop",cardio:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=500&h=500&fit=crop","sports-combat":"https://images.unsplash.com/photo-1549719386-74dfcbf7dbed?w=500&h=500&fit=crop"},M=[{id:"all",label:"Toutes les offres"},{id:"flash",label:"Flash Sale"},{id:"limited",label:"√âdition limit√©e"},{id:"clearance",label:"Liquidation"}];let x;const O=async()=>{d.value=!0;try{const t=await Y.getProducts({onSale:!0,limit:50,sortBy:"price",sortOrder:"desc"});t.success&&t.data&&(h.value=t.data.products||[],y())}catch(t){console.error("Erreur lors du chargement des promotions:",t),l.error("Erreur lors du chargement des promotions"),h.value=[]}finally{d.value=!1}},y=()=>{let t=[...h.value];switch(p.value){case"flash":t=t.filter(e=>e.salePrice?(e.price-e.salePrice)/e.price*100>=30:!1);break;case"limited":t=t.filter(e=>e.stockQuantity<10&&e.stockQuantity>0);break;case"clearance":t=t.filter(e=>e.salePrice?(e.price-e.salePrice)/e.price*100>=50:!1);break}P.value=t,b.value=Math.ceil(t.length/S),u.value=1},F=H(()=>{const t=(u.value-1)*S,e=t+S;return P.value.slice(t,e)}),D=t=>{var o;const e=((o=t.category)==null?void 0:o.slug)||"accessoires";return C[e]||C.accessoires},I=t=>t.salePrice?Math.round((t.price-t.salePrice)/t.price*100):0,j=t=>t.salePrice?t.price-t.salePrice:0,f=t=>{const e=I(t);return e>=50?"Liquidation":e>=30?"Flash Sale":t.stockQuantity<10?"√âdition limit√©e":"Promotion"},q=async t=>{var o,c;const e={_id:t.id.toString(),name:t.name,description:t.description,price:t.isOnSale&&t.salePrice?t.salePrice:t.price,salePrice:t.salePrice,isOnSale:t.isOnSale,images:[{url:D(t),alt:t.name,isPrimary:!0}],category:{id:t.categoryId.toString(),name:((o=t.category)==null?void 0:o.name)||"Sport",slug:((c=t.category)==null?void 0:c.slug)||"sport"},stock:{quantity:t.stockQuantity,reserved:0,lowStockThreshold:5},slug:t.slug||t.name.toLowerCase().replace(/\s+/g,"-"),status:"active",isActive:!0,rating:{average:4.5,count:100},salesCount:50,createdAt:t.createdAt,updatedAt:t.updatedAt};await E.addItem(e,1)},N=t=>{try{const e=JSON.parse(localStorage.getItem("userFavorites")||"[]"),o=e.indexOf(t);o>-1?(e.splice(o,1),l.success("Retir√© des favoris")):(e.push(t),l.success("Ajout√© aux favoris")),localStorage.setItem("userFavorites",JSON.stringify(e))}catch{l.error("Erreur lors de la mise √† jour des favoris")}},V=t=>{try{return JSON.parse(localStorage.getItem("userFavorites")||"[]").includes(t)}catch{return!1}},Q=async()=>{if(!g.value){l.error("Veuillez saisir votre email");return}v.value=!0;try{await new Promise(t=>setTimeout(t,1e3)),l.success("Inscription r√©ussie ! Vous recevrez nos meilleures offres."),g.value=""}catch{l.error("Erreur lors de l'inscription")}finally{v.value=!1}},B=()=>{u.value<b.value&&u.value++},A=()=>{const t=new Date().getTime(),e=L.value.getTime()-t;e>0?m.value={hours:Math.floor(e%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(e%(1e3*60*60)/(1e3*60)),seconds:Math.floor(e%(1e3*60)/1e3)}:m.value={hours:0,minutes:0,seconds:0}},_=t=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t);return G(async()=>{await O(),A(),x=setInterval(A,1e3)}),K(()=>{x&&clearInterval(x)}),(t,e)=>(n(),a("div",ee,[s("div",te,[s("div",se,[s("div",oe,[e[7]||(e[7]=s("h1",{class:"text-4xl font-bold mb-4"},"‚ö° FLASH SALE ‚ö°",-1)),e[8]||(e[8]=s("p",{class:"text-xl mb-6"},"Jusqu'√† 70% de r√©duction sur une s√©lection de produits !",-1)),s("div",re,[s("div",ie,[s("div",ae,[s("div",ne,r(m.value.hours.toString().padStart(2,"0")),1),e[2]||(e[2]=s("div",{class:"text-sm"},"Heures",-1))])]),e[5]||(e[5]=s("div",{class:"text-2xl"},":",-1)),s("div",le,[s("div",ce,[s("div",de,r(m.value.minutes.toString().padStart(2,"0")),1),e[3]||(e[3]=s("div",{class:"text-sm"},"Minutes",-1))])]),e[6]||(e[6]=s("div",{class:"text-2xl"},":",-1)),s("div",ue,[s("div",ge,[s("div",me,r(m.value.seconds.toString().padStart(2,"0")),1),e[4]||(e[4]=s("div",{class:"text-sm"},"Secondes",-1))])])]),e[9]||(e[9]=s("p",{class:"text-lg opacity-90"},"D√©p√™chez-vous, les stocks sont limit√©s !",-1))])])]),s("div",pe,[s("div",ve,[e[10]||(e[10]=s("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Filtrer par type d'offre",-1)),s("div",fe,[(n(),a(T,null,z(M,o=>s("button",{key:o.id,onClick:c=>{p.value=o.id,y()},class:k(["p-4 rounded-lg border-2 transition-all text-center",p.value===o.id?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 bg-white hover:border-gray-300"])},[s("div",be,r(o.label),1)],10,he)),64))])]),d.value?(n(),a("div",xe,e[11]||(e[11]=[s("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"},null,-1),s("p",{class:"mt-2"},"Chargement des offres...",-1)]))):F.value.length>0?(n(),a("div",ye,[s("div",_e,[(n(!0),a(T,null,z(F.value,o=>{var c;return n(),a("div",{key:o.id,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow group"},[s("div",we,[s("img",{src:D(o),alt:o.name,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,ke),s("div",Se," -"+r(I(o))+"% ",1),f(o)!=="Promotion"?(n(),a("div",{key:0,class:k(["absolute top-3 right-3 px-2 py-1 rounded-full text-xs font-medium",f(o)==="Flash Sale"?"bg-orange-500 text-white":f(o)==="Liquidation"?"bg-purple-500 text-white":"bg-blue-500 text-white"])},r(f(o)),3)):w("",!0),o.stockQuantity<=5?(n(),a("div",Pe," Plus que "+r(o.stockQuantity)+" en stock ! ",1)):w("",!0)]),s("div",Ce,[s("div",Fe,[s("span",De,r((c=o.category)==null?void 0:c.name),1)]),s("h3",Ie,r(o.name),1),s("div",Ve,[s("div",Ae,[s("span",Te,r(_(o.isOnSale&&o.salePrice?o.salePrice:o.price)),1),s("span",ze,r(_(o.price)),1)]),s("div",Ee," √âconomie "+r(_(j(o))),1)]),s("div",Le,[s("button",{onClick:J=>q(o),disabled:o.stockQuantity===0,class:"flex-1 px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:from-orange-600 hover:to-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium"},r(o.stockQuantity===0?"Rupture de stock":"Ajouter au panier"),9,Me),s("button",{onClick:J=>N(o.id),class:k(["px-3 py-2 rounded-lg border transition-colors",V(o.id)?"border-red-500 text-red-500 bg-red-50":"border-gray-300 text-gray-600 hover:border-gray-400"])},r(V(o.id)?"‚ù§Ô∏è":"ü§ç"),11,Oe)])])])}),128))]),u.value<b.value?(n(),a("div",je,[s("button",{onClick:B,disabled:d.value,class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},r(d.value?"Chargement...":"Voir plus d'offres"),9,qe)])):w("",!0)])):(n(),a("div",Ne,[e[12]||(e[12]=s("div",{class:"w-24 h-24 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center"},[s("span",{class:"text-4xl"},"üè∑Ô∏è")],-1)),e[13]||(e[13]=s("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Aucune offre trouv√©e",-1)),e[14]||(e[14]=s("p",{class:"text-gray-600 mb-6"},"Essayez un autre filtre ou revenez plus tard",-1)),s("button",{onClick:e[0]||(e[0]=o=>{p.value="all",y()}),class:"px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:from-orange-600 hover:to-red-700 transition-all"}," Voir toutes les offres ")])),s("div",Qe,[s("div",Be,[e[15]||(e[15]=s("h2",{class:"text-2xl font-bold mb-4"},"Ne ratez aucune offre !",-1)),e[16]||(e[16]=s("p",{class:"text-lg mb-6 opacity-90"}," Inscrivez-vous √† notre newsletter et soyez les premiers inform√©s de nos promotions exclusives ",-1)),s("div",Je,[W(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>g.value=o),type:"email",placeholder:"Votre adresse email",class:"flex-1 px-4 py-3 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-white"},null,512),[[X,g.value]]),s("button",{onClick:Q,disabled:!g.value||v.value,class:"px-6 py-3 bg-white text-orange-600 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50 font-medium"},r(v.value?"Inscription...":"S'inscrire"),9,Re)])])])])]))}});const Ge=Z($e,[["__scopeId","data-v-939be7d3"]]);export{Ge as default};
//# sourceMappingURL=DealsView-0f838165.js.map
