{"version":3,"file":"OrdersView-59b1aa8e.js","sources":["../../src/views/OrdersView.vue"],"sourcesContent":["<template>\n  <div class=\"orders-view\">\n    <div class=\"container mx-auto px-4 py-8\">\n      <h1 class=\"text-3xl font-bold mb-8\">Mes Commandes</h1>\n\n      <!-- Loading -->\n      <div v-if=\"orderStore.isLoading\" class=\"text-center py-16\">\n        <div class=\"inline-block w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\n        <p class=\"mt-4 text-gray-600\">Chargement des commandes...</p>\n      </div>\n\n      <!-- Aucune commande -->\n      <div v-else-if=\"orderStore.orders.length === 0\" class=\"text-center py-16\">\n        <div class=\"text-6xl mb-4\">ðŸ“¦</div>\n        <h2 class=\"text-2xl font-semibold mb-4\">Aucune commande</h2>\n        <p class=\"text-gray-600 mb-8\">Vous n'avez pas encore passÃ© de commande</p>\n        <router-link to=\"/\" class=\"btn btn-primary\">\n          DÃ©couvrir nos produits\n        </router-link>\n      </div>\n\n      <!-- Liste des commandes -->\n      <div v-else class=\"space-y-6\">\n        <div v-for=\"order in orderStore.orders\" :key=\"order.id\" class=\"card\">\n          <div class=\"card-body\">\n            <!-- En-tÃªte de commande -->\n            <div class=\"flex flex-col md:flex-row md:items-center md:justify-between mb-4\">\n              <div>\n                <h3 class=\"text-lg font-semibold\">Commande #{{ order.id }}</h3>\n                <p class=\"text-gray-600 text-sm\">\n                  PassÃ©e le {{ formatDate(order.createdAt) }}\n                </p>\n              </div>\n              <div class=\"mt-2 md:mt-0 flex items-center space-x-4\">\n                <span :class=\"getStatusClass(order.status)\" class=\"px-3 py-1 rounded-full text-sm font-medium\">\n                  {{ getStatusText(order.status) }}\n                </span>\n                <span class=\"text-lg font-semibold\">{{ parseFloat(order.total.toString()).toFixed(2) }}â‚¬</span>\n              </div>\n            </div>\n\n            <!-- Actions -->\n            <div class=\"flex flex-wrap gap-2\">\n              <button \n                @click=\"viewOrderDetails(order.id)\"\n                class=\"btn btn-outline btn-sm\"\n              >\n                Voir dÃ©tails\n              </button>\n              <button \n                v-if=\"order.status === 'delivered'\"\n                @click=\"reorderItems(order.id)\"\n                class=\"btn btn-primary btn-sm\"\n              >\n                Recommander\n              </button>\n              <button \n                v-if=\"['pending', 'confirmed'].includes(order.status)\"\n                @click=\"cancelOrder(order.id)\"\n                class=\"btn btn-outline btn-sm text-red-600 border-red-600 hover:bg-red-600 hover:text-white\"\n              >\n                Annuler\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- Pagination -->\n        <div v-if=\"pagination && pagination.pages > 1\" class=\"flex justify-center mt-8\">\n          <div class=\"flex space-x-2\">\n            <button \n              v-for=\"page in pagination.pages\" \n              :key=\"page\"\n              @click=\"loadPage(page)\"\n              :class=\"[\n                'px-3 py-2 rounded-md text-sm font-medium',\n                page === pagination.page \n                  ? 'bg-blue-500 text-white' \n                  : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n              ]\"\n            >\n              {{ page }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Modal de dÃ©tails -->\n    <div v-if=\"selectedOrder\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div class=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div class=\"p-6\">\n          <div class=\"flex justify-between items-center mb-4\">\n            <h2 class=\"text-xl font-semibold\">DÃ©tails de la commande #{{ selectedOrder.id }}</h2>\n            <button @click=\"selectedOrder = null\" class=\"text-gray-500 hover:text-gray-700\">\n              âœ•\n            </button>\n          </div>\n\n          <div class=\"space-y-4\">\n            <div>\n              <h3 class=\"font-medium mb-2\">Statut</h3>\n              <span :class=\"getStatusClass(selectedOrder.status)\" class=\"px-3 py-1 rounded-full text-sm font-medium\">\n                {{ getStatusText(selectedOrder.status) }}\n              </span>\n            </div>\n\n            <div>\n              <h3 class=\"font-medium mb-2\">Total</h3>\n              <span class=\"text-xl font-semibold\">{{ parseFloat(selectedOrder.total.toString()).toFixed(2) }}â‚¬</span>\n            </div>\n\n            <div>\n              <h3 class=\"font-medium mb-2\">Adresse de livraison</h3>\n              <div class=\"text-gray-600\">\n                <p>{{ selectedOrder.shippingAddress?.street }}</p>\n                <p>{{ selectedOrder.shippingAddress?.postalCode }} {{ selectedOrder.shippingAddress?.city }}</p>\n                <p>{{ selectedOrder.shippingAddress?.country }}</p>\n              </div>\n            </div>\n\n            <div>\n              <h3 class=\"font-medium mb-2\">Date de commande</h3>\n              <p class=\"text-gray-600\">{{ formatDate(selectedOrder.createdAt) }}</p>\n            </div>\n          </div>\n\n          <div class=\"flex justify-end mt-6\">\n            <button @click=\"selectedOrder = null\" class=\"btn btn-outline\">\n              Fermer\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\nimport { useOrderStore, type Order } from '@/stores/orders'\n// import { useCartStore } from '@/stores/cart'\n\nconst orderStore = useOrderStore()\n// const cartStore = useCartStore()\nconst selectedOrder = ref<Order | null>(null)\nconst pagination = ref<any>(null)\n\nonMounted(async () => {\n  await loadOrders()\n})\n\nconst loadOrders = async (page = 1) => {\n  try {\n    const result = await orderStore.fetchOrders({ page, limit: 10 })\n    pagination.value = result.pagination\n  } catch (error: any) {\n    console.error('Erreur lors du chargement des commandes:', error)\n    alert(`Erreur: ${error.message}`)\n  }\n}\n\nconst loadPage = (page: number) => {\n  loadOrders(page)\n}\n\nconst viewOrderDetails = async (orderId: number) => {\n  try {\n    const order = await orderStore.fetchOrderById(orderId.toString())\n    selectedOrder.value = order\n  } catch (error: any) {\n    console.error('Erreur lors du chargement des dÃ©tails:', error)\n    alert(`Erreur: ${error.message}`)\n  }\n}\n\nconst reorderItems = async (orderId: number) => {\n  // Ici on ajouterait les articles de la commande au panier\n  console.log('Recommander les articles de la commande:', orderId)\n  alert('FonctionnalitÃ© Ã  implÃ©menter: ajouter les articles au panier')\n}\n\nconst cancelOrder = async (orderId: number) => {\n  if (confirm('ÃŠtes-vous sÃ»r de vouloir annuler cette commande ?')) {\n    try {\n      // Ici on annulerait la commande\n      console.log('Annuler la commande:', orderId)\n      alert('Commande annulÃ©e (fonctionnalitÃ© Ã  implÃ©menter)')\n      await loadOrders()\n    } catch (error: any) {\n      console.error('Erreur lors de l\\'annulation:', error)\n      alert(`Erreur: ${error.message}`)\n    }\n  }\n}\n\nconst getStatusClass = (status: string) => {\n  const classes = {\n    pending: 'bg-yellow-100 text-yellow-800',\n    confirmed: 'bg-blue-100 text-blue-800',\n    processing: 'bg-purple-100 text-purple-800',\n    shipped: 'bg-indigo-100 text-indigo-800',\n    delivered: 'bg-green-100 text-green-800',\n    cancelled: 'bg-red-100 text-red-800'\n  }\n  return classes[status as keyof typeof classes] || 'bg-gray-100 text-gray-800'\n}\n\nconst getStatusText = (status: string) => {\n  const texts = {\n    pending: 'En attente',\n    confirmed: 'ConfirmÃ©e',\n    processing: 'En traitement',\n    shipped: 'ExpÃ©diÃ©e',\n    delivered: 'LivrÃ©e',\n    cancelled: 'AnnulÃ©e'\n  }\n  return texts[status as keyof typeof texts] || status\n}\n\nconst formatDate = (dateString: string) => {\n  return new Date(dateString).toLocaleDateString('fr-FR', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit'\n  })\n}\n</script> "],"names":["orderStore","useOrderStore","selectedOrder","ref","pagination","onMounted","loadOrders","page","result","error","loadPage","viewOrderDetails","orderId","order","reorderItems","cancelOrder","getStatusClass","status","getStatusText","formatDate","dateString","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_cache","_unref","_hoisted_3","_hoisted_4","_createVNode","_component_router_link","_hoisted_5","_Fragment","_renderList","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","$event","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_normalizeClass","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_a","_b","_c","_d","_hoisted_27","_hoisted_28"],"mappings":"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"}