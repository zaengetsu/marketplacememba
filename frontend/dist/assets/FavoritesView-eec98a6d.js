import{d as A,u as E,a as O,r as v,o as V,c as i,b as o,e as b,w as x,t as n,F as j,f as N,j as m,p as Q,g as M,h as l,i as _,n as R,_ as T}from"./index-c65d1cd2.js";const q={class:"favorites-view min-h-screen bg-gray-50"},z={class:"container mx-auto px-4 py-8"},$={key:0,class:"text-center py-16"},B={key:1},D={class:"flex justify-between items-center mb-6"},J={class:"text-gray-600"},L=["disabled"],U={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},G={class:"relative aspect-square overflow-hidden"},H=["src","alt"],K=["onClick","disabled"],W={key:0,class:"absolute top-3 left-3 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-medium"},X={key:1,class:"absolute bottom-3 left-3 bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-medium"},Y={key:2,class:"absolute bottom-3 left-3 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-medium"},Z={class:"p-4"},ee={class:"mb-2"},te={class:"text-xs text-gray-500 uppercase tracking-wide"},se={class:"font-semibold text-gray-900 mb-2 line-clamp-2"},oe={class:"text-sm text-gray-600 mb-3 line-clamp-2"},re={class:"flex items-center justify-between mb-4"},ae={class:"flex items-center space-x-2"},ie={key:0,class:"text-lg font-bold text-red-600"},ne={class:"flex space-x-2"},le=["onClick","disabled"],ce={key:0,class:"text-center mt-8"},de=["disabled"],ue=A({__name:"FavoritesView",setup(me){const w=E(),u=O(),a=v([]),d=v(!1),f=v(!1),h={chaussures:"https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=500&h=500&fit=crop",musculation:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=500&h=500&fit=crop","yoga-pilates":"https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=500&h=500&fit=crop","electronique-sport":"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&h=500&fit=crop",accessoires:"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=500&h=500&fit=crop",nutrition:"https://images.unsplash.com/photo-1593095948071-474c5cc2989d?w=500&h=500&fit=crop",cardio:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=500&h=500&fit=crop","sports-combat":"https://images.unsplash.com/photo-1549719386-74dfcbf7dbed?w=500&h=500&fit=crop"},k=async()=>{d.value=!0;try{const e=localStorage.getItem("userFavorites");if(!e){a.value=[];return}const s=JSON.parse(e);if(!Array.isArray(s)||s.length===0){a.value=[];return}const r=[];for(const t of s)try{const c=await Q.getProduct(t.toString());c.success&&c.data&&r.push(c.data)}catch(c){console.error(`Erreur lors du chargement du produit ${t}:`,c);const g=s.filter(I=>I!==t);localStorage.setItem("userFavorites",JSON.stringify(g))}a.value=r}catch(e){u.error("Erreur lors du chargement des favoris"),console.error("Error loading favorites:",e),a.value=[]}finally{d.value=!1}},S=async e=>{try{a.value=a.value.filter(r=>r.id!==e);const s=a.value.map(r=>r.id);localStorage.setItem("userFavorites",JSON.stringify(s)),u.success("Produit retir√© des favoris")}catch(s){u.error("Erreur lors de la suppression"),console.error("Error removing from favorites:",s)}},C=async()=>{if(confirm("√ätes-vous s√ªr de vouloir vider tous vos favoris ?"))try{a.value=[],localStorage.removeItem("userFavorites"),u.success("Tous les favoris ont √©t√© supprim√©s")}catch(e){u.error("Erreur lors de la suppression"),console.error("Error clearing favorites:",e)}},p=e=>{var r;const s=((r=e.category)==null?void 0:r.slug)||"accessoires";return h[s]||h.accessoires},F=async e=>{var r,t;const s={_id:e.id.toString(),name:e.name,description:e.description,price:e.isOnSale&&e.salePrice?e.salePrice:e.price,salePrice:e.salePrice,isOnSale:e.isOnSale,images:[{url:p(e),alt:e.name,isPrimary:!0}],category:{id:e.categoryId.toString(),name:((r=e.category)==null?void 0:r.name)||"Sport",slug:((t=e.category)==null?void 0:t.slug)||"sport"},stock:{quantity:e.stockQuantity,reserved:0,lowStockThreshold:5},slug:e.slug||e.name.toLowerCase().replace(/\s+/g,"-"),status:"active",isActive:!0,rating:{average:4.5,count:100},salesCount:50,createdAt:e.createdAt,updatedAt:e.updatedAt};await w.addItem(s,1)},P=async()=>{f.value=!1},y=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e);return V(()=>{k()}),(e,s)=>{const r=M("router-link");return l(),i("div",q,[o("div",z,[s[6]||(s[6]=o("div",{class:"mb-8"},[o("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Mes Favoris"),o("p",{class:"text-gray-600"},"Retrouvez tous vos produits pr√©f√©r√©s")],-1)),a.value.length===0?(l(),i("div",$,[s[1]||(s[1]=o("div",{class:"w-24 h-24 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center"},[o("span",{class:"text-4xl"},"üíù")],-1)),s[2]||(s[2]=o("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Aucun favori pour le moment",-1)),s[3]||(s[3]=o("p",{class:"text-gray-600 mb-6"},"D√©couvrez nos produits et ajoutez vos pr√©f√©r√©s √† cette liste",-1)),b(r,{to:"/products",class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:from-orange-600 hover:to-red-700 transition-all"},{default:x(()=>s[0]||(s[0]=[_(" D√©couvrir nos produits ")])),_:1,__:[0]})])):(l(),i("div",B,[o("div",D,[o("p",J,n(a.value.length)+" produit(s) en favoris",1),o("button",{onClick:C,class:"text-red-600 hover:text-red-700 font-medium",disabled:d.value}," Vider les favoris ",8,L)]),o("div",U,[(l(!0),i(j,null,N(a.value,t=>{var c;return l(),i("div",{key:t.id,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow group"},[o("div",G,[o("img",{src:p(t),alt:t.name,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,H),o("button",{onClick:g=>S(t.id),class:"absolute top-3 right-3 w-10 h-10 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center text-red-500 hover:bg-white hover:text-red-600 transition-all shadow-sm",disabled:d.value},s[4]||(s[4]=[o("span",{class:"text-xl"},"‚ù§Ô∏è",-1)]),8,K),t.isOnSale&&t.salePrice?(l(),i("div",W," -"+n(Math.round((t.price-t.salePrice)/t.price*100))+"% ",1)):m("",!0),t.stockQuantity<=5&&t.stockQuantity>0?(l(),i("div",X," Plus que "+n(t.stockQuantity)+" en stock ",1)):t.stockQuantity===0?(l(),i("div",Y," Rupture de stock ")):m("",!0)]),o("div",Z,[o("div",ee,[o("span",te,n(((c=t.category)==null?void 0:c.name)||"Sport"),1)]),o("h3",se,n(t.name),1),o("p",oe,n(t.description),1),o("div",re,[o("div",ae,[t.isOnSale&&t.salePrice?(l(),i("span",ie,n(y(t.salePrice)),1)):m("",!0),o("span",{class:R(["font-semibold",t.isOnSale&&t.salePrice?"text-sm text-gray-500 line-through":"text-lg text-gray-900"])},n(y(t.price)),3)])]),o("div",ne,[o("button",{onClick:g=>F(t),disabled:t.stockQuantity===0||d.value,class:"flex-1 px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:from-orange-600 hover:to-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium"},n(t.stockQuantity===0?"Rupture de stock":"Ajouter au panier"),9,le),b(r,{to:`/products/${t.id}`,class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium"},{default:x(()=>s[5]||(s[5]=[_(" Voir ")])),_:2,__:[5]},1032,["to"])])])])}),128))]),f.value?(l(),i("div",ce,[o("button",{onClick:P,disabled:d.value,class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},n(d.value?"Chargement...":"Charger plus"),9,de)])):m("",!0)]))])])}}});const ve=T(ue,[["__scopeId","data-v-b6613057"]]);export{ve as default};
//# sourceMappingURL=FavoritesView-eec98a6d.js.map
