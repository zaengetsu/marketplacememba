import{d as w,r as p,o as V,c as o,b as e,l as y,v as C,m as D,F as f,f as h,j as b,t as n,E as S,h as d,i as N}from"./index-c65d1cd2.js";const A={class:"container mx-auto px-4 py-8"},T={class:"flex flex-wrap gap-4 mb-6"},B=["value"],F={class:"min-w-full bg-white mt-2"},L={class:"py-2 px-4 border-b"},M={class:"py-2 px-4 border-b"},P={key:0},U={class:"py-2 px-4 border-b"},j={class:"py-2 px-4 border-b"},E={class:"py-2 px-4 border-b"},I={key:0},O={key:0,class:"flex justify-center items-center gap-2 mt-6"},R=["disabled"],$=["disabled"],G=w({__name:"AdminOrdersView",setup(q){const i=p([]),a=p({page:1,limit:10,total:0,pages:1}),r=p(""),u=p(""),_=["pending","confirmed","processing","shipped","delivered","cancelled","refunded"],c=async()=>{try{const l={page:a.value.page,limit:a.value.limit};r.value&&(l.search=r.value),u.value&&(l.status=u.value);const t=await S.get("/admin/orders",{params:l});t.data.success&&(i.value=t.data.data.orders,a.value=t.data.data.pagination)}catch{i.value=[],a.value={page:1,limit:10,total:0,pages:1}}},v=l=>{a.value.page=l,c()},m=()=>{a.value.page=1,c()},k=l=>new Date(l).toLocaleString("fr-FR");return V(c),(l,t)=>(d(),o("div",A,[t[8]||(t[8]=e("h1",{class:"text-2xl font-bold mb-4"},"Liste des commandes",-1)),e("div",T,[y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),onInput:m,class:"input input-bordered",placeholder:"Recherche utilisateur...",style:{"min-width":"200px"}},null,544),[[C,r.value]]),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.value=s),onChange:m,class:"input input-bordered"},[t[4]||(t[4]=e("option",{value:""},"Tous statuts",-1)),(d(),o(f,null,h(_,s=>e("option",{key:s,value:s},n(s),9,B)),64))],544),[[D,u.value]])]),e("table",F,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",{class:"py-2 px-4 border-b"},"ID"),e("th",{class:"py-2 px-4 border-b"},"Utilisateur"),e("th",{class:"py-2 px-4 border-b"},"Statut"),e("th",{class:"py-2 px-4 border-b"},"Total"),e("th",{class:"py-2 px-4 border-b"},"Date"),e("th",{class:"py-2 px-4 border-b"},"Actions")])],-1)),e("tbody",null,[(d(!0),o(f,null,h(i.value,s=>{var g,x;return d(),o("tr",{key:s.id},[e("td",L,n(s.id),1),e("td",M,[N(n((g=s.user)==null?void 0:g.firstName)+" "+n((x=s.user)==null?void 0:x.lastName)+" ",1),s.user?b("",!0):(d(),o("span",P,"-"))]),e("td",U,n(s.status),1),e("td",j,n(s.total)+" €",1),e("td",E,n(k(s.createdAt)),1),t[5]||(t[5]=e("td",{class:"py-2 px-4 border-b"},[e("button",{class:"btn btn-xs btn-outline"},"Voir")],-1))])}),128)),i.value.length===0?(d(),o("tr",I,t[6]||(t[6]=[e("td",{class:"py-2 px-4 border-b",colspan:"6",align:"center"},"Aucune commande",-1)]))):b("",!0)])]),a.value.pages>1?(d(),o("div",O,[e("button",{class:"btn btn-sm",disabled:a.value.page===1,onClick:t[2]||(t[2]=s=>v(a.value.page-1))},"Précédent",8,R),e("span",null,"Page "+n(a.value.page)+" / "+n(a.value.pages),1),e("button",{class:"btn btn-sm",disabled:a.value.page===a.value.pages,onClick:t[3]||(t[3]=s=>v(a.value.page+1))},"Suivant",8,$)])):b("",!0)]))}});export{G as default};
//# sourceMappingURL=AdminOrdersView-e6dac413.js.map
